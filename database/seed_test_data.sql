-- =============================================
-- Cummins 零件仓库管理系统 - 测试数据
-- 用于开发环境的测试数据
-- =============================================

-- 注意：密码已使用 bcrypt 加密
-- 原始密码: admin123, manager123, staff123

-- 1. 插入用户数据
INSERT INTO users (username, email, phone, full_name, hashed_password, role, is_superuser) VALUES
('admin', 'admin@warehouse.com', '13800138000', '系统管理员', '$2b$12$iHFJxjm8P8uJDyRn9bhJIOOtb/3rxZPiStyQ9crREhC14xHEQV94q', 'admin', TRUE),
('manager', 'manager@warehouse.com', '13800138001', '仓库经理', '$2b$12$dIMLWxtI1Q7SwlaXATnNHustGNkrJQRz/5DP3oZ9BEKPmTWkoriN2', 'manager', FALSE),
('staff', 'staff@warehouse.com', '13800138002', '仓库员工', '$2b$12$ujCph6NyyPX8E/cemoA6hugnJOLarI4QwCrYkXuMmHgm6MNfbHMHG', 'staff', FALSE),
('rextest', 'rex@test.com', '13900001111', 'Rex 测试账号', '$2b$12$fnVPPQVGketfmYBlHkT1z.coivQhDbZ1QeqJqQEX.UZHg.lkmaLbq', 'admin', TRUE);

-- 2. 插入产品分类
INSERT INTO product_categories (name, code, description) VALUES
('发动机', 'ENGINE', 'Cummins 发动机整机'),
('零配件', 'PARTS', '发动机零配件'),
('机油', 'OIL', '润滑油和机油'),
('滤芯', 'FILTER', '各类滤芯'),
('传感器', 'SENSOR', '各类传感器');

-- 3. 插入产品数据
INSERT INTO products (name, sku, part_number, engine_model, description, category_id, price, cost, unit, min_stock_level) VALUES
-- 发动机
('Cummins 6BT5.9 发动机总成', 'ENG-6BT59-001', '6BT5.9-C120', '6BT5.9', 'Cummins 6BT5.9 柴油发动机总成，120马力', 1, 45000.00, 38000.00, '台', 5),
('Cummins ISF2.8 发动机总成', 'ENG-ISF28-001', 'ISF2.8-C107', 'ISF2.8', 'Cummins ISF2.8 柴油发动机总成，107马力', 1, 38000.00, 32000.00, '台', 5),

-- 零配件
('喷油器总成', 'PART-INJ-001', '4937065', '6BT5.9', '6BT5.9 喷油器总成', 2, 1200.00, 950.00, '件', 20),
('活塞组件', 'PART-PIS-001', '3802657', 'ISF2.8', 'ISF2.8 活塞组件（含活塞环）', 2, 580.00, 450.00, '套', 15),
('涡轮增压器', 'PART-TUR-001', '4955152', '6BT5.9', '6BT5.9 涡轮增压器', 2, 3500.00, 2800.00, '件', 10),

-- 机油
('Cummins 专用机油 15W-40', 'OIL-15W40-001', 'CES20081', '通用', 'Cummins 认证柴油机机油 15W-40', 3, 280.00, 220.00, '桶', 50),
('Cummins 专用机油 10W-30', 'OIL-10W30-001', 'CES20086', '通用', 'Cummins 认证柴油机机油 10W-30', 3, 300.00, 240.00, '桶', 40),

-- 滤芯
('机油滤清器', 'FIL-OIL-001', 'LF9009', '6BT5.9', '6BT5.9 机油滤清器', 4, 85.00, 60.00, '件', 100),
('燃油滤清器', 'FIL-FUEL-001', 'FF5320', 'ISF2.8', 'ISF2.8 燃油滤清器', 4, 95.00, 70.00, '件', 100),
('空气滤清器', 'FIL-AIR-001', 'AF25558', '通用', '空气滤清器外滤芯', 4, 120.00, 90.00, '件', 80),

-- 传感器
('水温传感器', 'SEN-TEMP-001', '4921477', '6BT5.9', '6BT5.9 水温传感器', 5, 150.00, 110.00, '件', 30),
('机油压力传感器', 'SEN-PRES-001', '4921322', 'ISF2.8', 'ISF2.8 机油压力传感器', 5, 180.00, 140.00, '件', 30);

-- 4. 插入仓库数据
INSERT INTO warehouses (name, code, location, capacity, current_usage, manager_name, phone) VALUES
('成都主仓库', 'WH001', '四川省成都市新都区', 5000.0, 2800.0, '张三', '13900000001'),
('重庆分仓库', 'WH002', '重庆市北碚区', 3000.0, 1500.0, '李四', '13900000002'),
('昆明分仓库', 'WH003', '云南省昆明市官渡区', 2000.0, 800.0, '王五', '13900000003');

-- 5. 插入库存数据
-- 产品 ID 1 (发动机) 在各仓库的库存
INSERT INTO inventory (product_id, warehouse_id, quantity, reserved_quantity, location_code) VALUES
(1, 1, 25, 2, 'A-05-10'),
(1, 2, 15, 1, 'A-03-05'),
(1, 3, 8, 0, 'A-02-03'),

-- 产品 ID 2 (发动机) 在各仓库的库存
(2, 1, 30, 3, 'A-05-12'),
(2, 2, 20, 2, 'A-03-07'),
(2, 3, 12, 1, 'A-02-05'),

-- 产品 ID 3 (喷油器) 在各仓库的库存
(3, 1, 85, 5, 'B-10-15'),
(3, 2, 60, 3, 'B-08-12'),
(3, 3, 45, 2, 'B-05-08'),

-- 产品 ID 4 (活塞组件) 在各仓库的库存
(4, 1, 120, 8, 'B-12-20'),
(4, 2, 80, 5, 'B-09-15'),
(4, 3, 55, 3, 'B-06-10'),

-- 产品 ID 5 (涡轮增压器) 在各仓库的库存
(5, 1, 35, 2, 'B-08-18'),
(5, 2, 25, 2, 'B-06-14'),
(5, 3, 15, 1, 'B-04-09'),

-- 产品 ID 6 (机油 15W-40) 在各仓库的库存
(6, 1, 250, 15, 'C-15-25'),
(6, 2, 180, 10, 'C-12-20'),
(6, 3, 120, 8, 'C-08-15'),

-- 产品 ID 7 (机油 10W-30) 在各仓库的库存
(7, 1, 200, 12, 'C-15-28'),
(7, 2, 150, 8, 'C-12-22'),
(7, 3, 100, 5, 'C-08-18'),

-- 产品 ID 8 (机油滤清器) 在各仓库的库存 - 正常库存
(8, 1, 450, 25, 'D-20-30'),
(8, 2, 350, 18, 'D-18-25'),
(8, 3, 280, 12, 'D-15-20'),

-- 产品 ID 9 (燃油滤清器) 在各仓库的库存 - 部分低库存
(9, 1, 380, 20, 'D-20-32'),
(9, 2, 95, 5, 'D-18-28'),  -- 接近最低库存
(9, 3, 8, 0, 'D-15-22'),   -- 低于最低库存

-- 产品 ID 10 (空气滤清器) 在各仓库的库存 - 部分缺货
(10, 1, 320, 18, 'D-22-35'),
(10, 2, 75, 4, 'D-19-30'),  -- 接近最低库存
(10, 3, 0, 0, 'D-16-25'),   -- 缺货

-- 产品 ID 11 (水温传感器) 在各仓库的库存
(11, 1, 125, 8, 'E-10-15'),
(11, 2, 90, 5, 'E-08-12'),
(11, 3, 65, 3, 'E-06-10'),

-- 产品 ID 12 (机油压力传感器) 在各仓库的库存
(12, 1, 110, 6, 'E-10-18'),
(12, 2, 85, 4, 'E-08-15'),
(12, 3, 60, 2, 'E-06-12');

-- 6. 插入经销商数据
INSERT INTO distributors (name, code, contact_person, phone, email, address, region, credit_limit) VALUES
('成都康明斯专卖店', 'DIST001', '赵六', '028-88888888', 'zhao@cdcummins.com', '四川省成都市武侯区人民南路123号', '四川', 500000.0),
('重庆康明斯经销商', 'DIST002', '钱七', '023-66666666', 'qian@cqcummins.com', '重庆市渝北区金渝大道456号', '重庆', 300000.0),
('云南康明斯代理', 'DIST003', '孙八', '0871-77777777', 'sun@yncummins.com', '云南省昆明市盘龙区北京路789号', '云南', 200000.0),
('贵州康明斯销售中心', 'DIST004', '周九', '0851-99999999', 'zhou@gzcummins.com', '贵州省贵阳市南明区中华南路321号', '贵州', 150000.0);

-- 7. 插入销售订单数据（示例）
INSERT INTO sales_orders (order_code, distributor_id, product_id, product_name, quantity, unit_price, total_value, status, warehouse_id, delivery_date, user_id, notes, order_date) VALUES
-- 已完成的订单
('SO202411011001', 1, 1, 'Cummins 6BT5.9 发动机总成', 2, 45000.00, 90000.00, 'completed', 1, '2024-11-05 00:00:00', 1, '常规订单', '2024-10-25 09:30:00'),
('SO202411021002', 2, 6, 'Cummins 专用机油 15W-40', 50, 280.00, 14000.00, 'completed', 2, '2024-11-06 00:00:00', 2, '批量采购', '2024-10-28 14:20:00'),
('SO202411031003', 3, 8, '机油滤清器', 100, 85.00, 8500.00, 'completed', 3, '2024-11-08 00:00:00', 2, '定期补货', '2024-10-30 10:15:00'),

-- 已发货的订单
('SO202411041004', 1, 3, '喷油器总成', 10, 1200.00, 12000.00, 'shipped', 1, '2024-11-10 00:00:00', 1, '紧急订单', '2024-11-02 16:45:00'),
('SO202411051005', 4, 5, '涡轮增压器', 5, 3500.00, 17500.00, 'shipped', 1, '2024-11-11 00:00:00', 2, '维修更换', '2024-11-03 11:20:00'),

-- 处理中的订单
('SO202411061006', 2, 2, 'Cummins ISF2.8 发动机总成', 3, 38000.00, 114000.00, 'processing', 2, '2024-11-15 00:00:00', 1, '新客户订单', '2024-11-05 09:00:00'),
('SO202411071007', 3, 7, 'Cummins 专用机油 10W-30', 30, 300.00, 9000.00, 'processing', 3, '2024-11-13 00:00:00', 2, '月度订单', '2024-11-06 14:30:00'),

-- 待处理的订单
('SO202411081008', 1, 9, '燃油滤清器', 80, 95.00, 7600.00, 'pending', 1, '2024-11-18 00:00:00', 1, '补货订单', '2024-11-07 10:20:00'),
('SO202411091009', 4, 10, '空气滤清器', 60, 120.00, 7200.00, 'pending', 2, '2024-11-20 00:00:00', 2, '常规补货', '2024-11-08 15:45:00'),
('SO202411101010', 2, 11, '水温传感器', 25, 150.00, 3750.00, 'pending', 2, '2024-11-22 00:00:00', 1, '零配件订单', '2024-11-09 09:15:00');

-- 8. 插入库存交易记录（示例）
INSERT INTO inventory_transactions (product_id, warehouse_id, transaction_type, quantity, user_id, reference, notes, created_at) VALUES
-- 入库记录
(1, 1, 'IN', 10, 1, 'PO-20241101-001', '发动机入库', '2024-11-01 09:00:00'),
(6, 1, 'IN', 100, 2, 'PO-20241101-002', '机油批量入库', '2024-11-01 10:30:00'),
(8, 2, 'IN', 150, 2, 'PO-20241102-001', '滤芯补货入库', '2024-11-02 14:00:00'),

-- 出库记录（对应订单）
(1, 1, 'OUT', -2, 1, 'SO202411011001', '订单出库', '2024-11-04 10:00:00'),
(6, 2, 'OUT', -50, 2, 'SO202411021002', '订单出库', '2024-11-05 11:00:00'),
(8, 3, 'OUT', -100, 2, 'SO202411031003', '订单出库', '2024-11-07 09:30:00'),

-- 调整记录
(9, 3, 'ADJUST', -5, 1, 'ADJ-20241105-001', '盘点调整 - 发现损坏', '2024-11-05 16:00:00'),
(10, 2, 'ADJUST', 10, 2, 'ADJ-20241106-001', '盘点调整 - 账实差异', '2024-11-06 15:30:00'),

-- 调拨记录
(7, 1, 'TRANSFER', -20, 1, 'TRF-20241107-001', '从成都调拨至重庆', '2024-11-07 10:00:00'),
(7, 2, 'TRANSFER', 20, 1, 'TRF-20241107-001', '从成都调拨至重庆', '2024-11-07 11:00:00');

-- 9. 插入活动日志（示例）
INSERT INTO activity_logs (activity_type, action, item_name, user_id, reference_id, reference_type, created_at) VALUES
-- 订单活动
('order', '创建订单', '订单 SO202411101010', 1, 10, 'order', '2024-11-09 09:15:00'),
('order', '订单完成', '订单 SO202411011001', 1, 1, 'order', '2024-11-05 10:00:00'),
('order', '订单发货', '订单 SO202411041004', 1, 4, 'order', '2024-11-09 08:30:00'),

-- 库存活动
('inventory', '入库', 'Cummins 6BT5.9 发动机总成', 1, 1, 'product', '2024-11-01 09:00:00'),
('inventory', '出库', 'Cummins 专用机油 15W-40', 2, 6, 'product', '2024-11-05 11:00:00'),
('inventory', '盘点调整', '燃油滤清器', 1, 9, 'product', '2024-11-05 16:00:00'),

-- 产品活动
('product', '更新产品', 'Cummins ISF2.8 发动机总成', 1, 2, 'product', '2024-11-03 14:20:00'),
('product', '更新产品', '机油滤清器', 2, 8, 'product', '2024-11-04 10:15:00'),

-- 警报活动
('alert', '低库存警报', '燃油滤清器 - 昆明分仓库', 1, 9, 'product', '2024-11-08 08:00:00'),
('alert', '缺货警报', '空气滤清器 - 昆明分仓库', 1, 10, 'product', '2024-11-09 08:00:00');

-- =============================================
-- 查询验证数据
-- =============================================

-- 查看各表数据量
SELECT '用户' as 表名, COUNT(*) as 记录数 FROM users
UNION ALL
SELECT '产品分类', COUNT(*) FROM product_categories
UNION ALL
SELECT '产品', COUNT(*) FROM products
UNION ALL
SELECT '仓库', COUNT(*) FROM warehouses
UNION ALL
SELECT '库存', COUNT(*) FROM inventory
UNION ALL
SELECT '经销商', COUNT(*) FROM distributors
UNION ALL
SELECT '销售订单', COUNT(*) FROM sales_orders
UNION ALL
SELECT '库存交易', COUNT(*) FROM inventory_transactions
UNION ALL
SELECT '活动日志', COUNT(*) FROM activity_logs;
